<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Bus Stop – EchoRooms</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: url('https://images.unsplash.com/photo-1544198365-3a5d3a1be9b5?auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-shadow: 1px 1px 2px black;
      overflow: hidden;
    }

    #overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      z-index: 0;
    }

    #text {
      z-index: 1;
      padding: 20px;
      text-align: center;
      max-width: 700px;
      font-size: 1.4em;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 12px;
    }

    #choices {
      margin-top: 20px;
      display: none;
    }

    button {
      background-color: #444;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 10px;
      font-size: 1em;
      cursor: pointer;
      border-radius: 8px;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #666;
    }

    /* Pluie légère en overlay */
    body::after {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: url('https://i.gifer.com/7VE.gif') repeat;
      opacity: 0.08;
      z-index: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="overlay"></div>

  <audio src="sad-music.mp3" autoplay loop></audio>
  <audio src="bus-stop-voice.mp3" autoplay></audio>

  <div id="text">Loading...</div>

  <div id="choices">
    <button onclick="choose('call')">Call her back</button>
    <button onclick="choose('stay')">Stay silent</button>
  </div>

  <script>
    const lines = [
      "You hide your backpack behind the bench. It still smells like home.",
      "The wind cuts through your hoodie. You pull it tighter.",
      "A couple passes by. They don’t see you. You look away.",
      "Your stomach growls, but you stay quiet.",
      "The shelter closes in 30 minutes. You might not make it.",
      "The streetlamp flickers. You count how many nights you've been here.",
      "You stop at eleven.",
      "You see a woman drop a dollar bill as she walks by.",
      "What do you do?"
    ];

    const textElement = document.getElementById("text");
    const choices = document.getElementById("choices");

    let index = 0;

    function showNextLine() {
      if (index < lines.length - 1) {
        textElement.innerText = lines[index];
        index++;
        setTimeout(showNextLine, 3500);
      } else {
        textElement.innerText = lines[index];
        choices.style.display = 'block';
      }
    }

    function choose(option) {
      choices.style.display = 'none';
      if (option === 'call') {
        textElement.innerText = "You call out. She turns, surprised, and smiles. It's the first smile you've seen today.";
      } else {
        textElement.innerText = "You stay silent. The dollar dances in the wind, then disappears down the street.";
      }
    }

    showNextLine();
  </script>
</body>
</html>
